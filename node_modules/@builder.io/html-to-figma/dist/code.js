!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=102)}({102:function(e,t,n){"use strict";n.r(t);var i=n(20),o=n(24),r=n(16),a=n(15),s=function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((i=i.apply(e,t||[])).next())})};const c=["id","width","height","currentPage","cancel","origin","onmessage","center","zoom","fontName","name","visible","locked","constraints","relativeTransform","x","y","rotation","constrainProportions","layoutAlign","layoutGrow","opacity","blendMode","isMask","effects","effectStyleId","expanded","backgrounds","backgroundStyleId","fills","strokes","strokeWeight","strokeMiterLimit","strokeAlign","strokeCap","strokeJoin","dashPattern","fillStyleId","strokeStyleId","cornerRadius","cornerSmoothing","topLeftRadius","topRightRadius","bottomLeftRadius","bottomRightRadius","exportSettings","overflowDirection","numberOfFixedChildren","description","layoutMode","primaryAxisSizingMode","counterAxisSizingMode","primaryAxisAlignItems","counterAxisAlignItems","paddingLeft","paddingRight","paddingTop","paddingBottom","itemSpacing","layoutGrids","gridStyleId","clipsContent","guides","guides","selection","selectedTextRange","backgrounds","arcData","pointCount","pointCount","innerRadius","vectorNetwork","vectorPaths","handleMirroring","textAlignHorizontal","textAlignVertical","textAutoResize","paragraphIndent","paragraphSpacing","autoRename","textStyleId","fontSize","fontName","textCase","textDecoration","letterSpacing","lineHeight","characters","mainComponent","scaleFactor","booleanOperation","expanded","name","type","paints","type","fontSize","textDecoration","fontName","letterSpacing","lineHeight","paragraphIndent","paragraphSpacing","textCase","type","effects","type","layoutGrids"],l=(e,t=new Set)=>{if(!e||"object"!=typeof e)return e;const n=Array.isArray(e)?[]:{};for(const t of c){const i=e[t];void 0!==i&&"symbol"!=typeof i&&(n[t]=e[t])}return n};function f(){return s(this,void 0,void 0,function*(){console.log(JSON.stringify(figma.currentPage.selection.map(e=>l(e)),null,2)),figma.ui.postMessage({type:"selectionChange",elements:Object(r.a)(yield Promise.all(figma.currentPage.selection.map(e=>m(e,{withChildren:!0}))))})})}function d(e){return s(this,void 0,void 0,function*(){const t=u(e);return t&&Promise.all(t.map(e=>s(this,void 0,void 0,function*(){(null==e?void 0:e.intArr)&&(e.imageHash=yield figma.createImage(e.intArr).hash,delete e.intArr)})))})}function u(e){return Array.isArray(e.fills)&&e.fills.filter(e=>"IMAGE"===e.type)}figma.on("selectionchange",()=>s(void 0,void 0,void 0,function*(){f()})),figma.showUI(__html__,{width:o.a.ui.baseWidth,height:o.a.ui.baseHeight});const g=e=>e.toLowerCase().replace(/[^a-z]/gi,""),y={family:"Roboto",style:"Regular"};function p(e,t){return s(this,void 0,void 0,function*(){const n=e.split(/\s*,\s*/);for(const i of n){const n=g(i);for(const i of t){const t=g(i.fontName.family);if(t===n){const n=h[t];return n||(yield figma.loadFontAsync(i.fontName),h[e]=i.fontName,h[t]=i.fontName,i.fontName)}}}return y})}const h={};function m(e,t={}){return s(this,void 0,void 0,function*(){let n=e.fills&&Object(r.a)(e.fills)||[];if(t.withImages&&n.length)for(const t of n)if("IMAGE"===t.type&&t.imageHash){const n=figma.getImageByHash(t.imageHash);try{const i=yield n.getBytesAsync();t.intArr=i}catch(n){console.warn("Could not get image for layer",e,t,n)}}const i=Object(a.b)(e)&&e.children.every(e=>"VECTOR"===e.type)||"VECTOR"===e.type;if(t.withImages&&i){const t=yield e.exportAsync({format:"PNG",constraint:{type:"SCALE",value:2}});n=[Object.assign({type:"IMAGE",visible:!0,scaleMode:"FIT"},{intArr:t})]}return Object.assign(Object.assign({},l(e)),{fills:n,type:"VECTOR"===e.type?"RECTANGLE":e.type,data:JSON.parse(e.getSharedPluginData("builder","data")||"{}"),children:t.withChildren&&e.children&&!i&&(yield Promise.all(e.children.filter(e=>e.visible).map(e=>m(e,t))))||void 0})})}function v(e,t){for(const n in t){const i=t[n];if("data"===n&&i&&"object"==typeof i){const t=JSON.parse(e.getSharedPluginData("builder","data")||"{}")||{},n=i,o=Object.assign({},t,n);e.setSharedPluginData("builder","data",JSON.stringify(o))}else if(void 0!==i&&-1===["width","height","type","ref","children","svg"].indexOf(n))try{e[n]=t[n]}catch(i){console.warn(`Assign error for property "${n}"`,e,t,i)}}}const b="isImportErrors";function x(){figma.currentPage.children.forEach(e=>{"true"===e.getPluginData(b)&&e.remove()})}const A=new Set(["RECTANGLE","FRAME","TEXT","COMPONENT","LINE","INSTANCE"]),S=e=>!!e.visible&&(e.children&&"unknown"===Object(a.a)(e)||!A.has(e.type)),w=e=>{var t;if("number"!=typeof e.x||!e.parent||["PAGE","DOCUMENT"].includes(e.type))return{x:0,y:0};const n={x:e.x,y:e.y};if(["PAGE","DOCUMENT"].includes(e.parent.type))return n;let i=e;for(;(i=i.parent)&&(Object(a.c)(i)||"number"!=typeof i.x||(n.x+=i.x,n.y+=i.y),!["PAGE","DOCUMENT"].includes(null===(t=i.parent)||void 0===t?void 0:t.type)););return n},O=(e,t)=>{const n=w(e);return{x:n.x-t.x,y:n.y-t.y}},E=e=>{let t=e;do{if(!1===t.visible)return!0}while(t=t.parent);return!1};figma.ui.onmessage=e=>s(void 0,void 0,void 0,function*(){if("resize"===e.type&&figma.ui.resize(e.width,e.height),"getStorage"===e.type){const e=yield figma.clientStorage.getAsync("data");figma.ui.postMessage({type:"storage",data:e})}if("init"===e.type&&f(),"setStorage"===e.type){const t=e.data;figma.clientStorage.setAsync("data",t)}if("checkIfCanGetCode"===e.type){const e=yield function(){return s(this,void 0,void 0,function*(){x();const e=figma.currentPage.selection[0];if(!e)return!1;const t=[];if(yield Object(i.a)(e,e=>{!E(e)&&S(e)&&t.push(e)}),t.length){const n=figma.createFrame();n.name="Export to code errors - delete me anytime";const i=w(e);n.x=i.x,n.y=i.y,n.fills=[],n.resize(e.width||1,e.height||1),n.setPluginData(b,"true");for(const e of t){const t=figma.createRectangle();t.setPluginData(b,"true"),"VECTOR"===e.type?t.name=`"${e.name}" needs to be a rasterized image`:t.name=`"${e.name}" needs to use autolayout`;const{x:o,y:r}=O(e,i);t.x=o,t.y=r,t.fills=[],t.resize(e.width||1,e.height||1),t.strokeWeight=4,t.strokes=[{type:"SOLID",visible:!0,opacity:1,blendMode:"NORMAL",color:{r:1,g:0,b:0}}],n.appendChild(t)}}return!t.length})}();figma.ui.postMessage({type:"canGetCode",value:e})}if("getSelectionWithImages"===e.type&&figma.ui.postMessage({type:"selectionWithImages",elements:yield Promise.all(figma.currentPage.selection.map(e=>m(e,{withChildren:!0,withImages:!0})))}),"updateElements"===e.type){const t=e.elements;for(const e of t){const t=figma.getNodeById(e.id);t&&v(t,e)}}if("clearErrors"===e.type&&x(),"import"===e.type){const t=(yield figma.listAvailableFontsAsync()).filter(e=>"Regular"===e.fontName.style);yield figma.loadFontAsync(y);const{data:n}=e,{layers:o}=n,r=[];let a=figma.currentPage,c=a;for(const e of o)yield Object(i.a)(e,(e,n)=>s(void 0,void 0,void 0,function*(){try{if("FRAME"===e.type||"GROUP"===e.type){const t=figma.createFrame();t.x=e.x,t.y=e.y,t.resize(e.width||1,e.height||1),v(t,e),r.push(t),(n&&n.ref||a).appendChild(t),e.ref=t,n||(c=t,a=t)}else if("SVG"===e.type){const t=figma.createNodeFromSvg(e.svg);t.x=e.x,t.y=e.y,t.resize(e.width||1,e.height||1),e.ref=t,r.push(t),v(t,e),(n&&n.ref||a).appendChild(t)}else if("RECTANGLE"===e.type){const t=figma.createRectangle();u(e)&&(yield d(e)),v(t,e),t.resize(e.width||1,e.height||1),r.push(t),e.ref=t,(n&&n.ref||a).appendChild(t)}else if("TEXT"==e.type){const i=figma.createText();if(e.fontFamily){const n=h[e.fontFamily];if(n)i.fontName=n;else{const n=yield p(e.fontFamily||"",t);i.fontName=n}delete e.fontFamily}v(i,e),e.ref=i,i.resize(e.width||1,e.height||1),i.textAutoResize="HEIGHT";const o=e.lineHeight&&e.lineHeight.value||e.height;let s=0;for(;"number"==typeof i.fontSize&&"number"==typeof e.fontSize&&(i.height>1.2*Math.max(e.height,o)||i.width>1.2*e.width);){if(s++>.3*e.fontSize){console.warn("Too many font adjustments",i,e);break}try{i.fontSize=i.fontSize-1}catch(t){console.warn("Error on resize text:",e,i,t)}}r.push(i),(n&&n.ref||a).appendChild(i)}}catch(t){console.warn("Error on layer:",e,t)}}));"FRAME"===c.type&&(figma.currentPage.selection=[c]),figma.ui.postMessage({type:"doneLoading",rootId:c.id}),figma.viewport.scrollAndZoomIntoView([c]),figma.closePlugin()}})},15:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"c",function(){return o}),n.d(t,"a",function(){return r});const i=e=>!(!e||!e.children),o=e=>!(!e||"GROUP"!==e.type),r=e=>{var t;return o(e)&&1===(null===(t=e.children)||void 0===t?void 0:t.length)?"column":"VERTICAL"===e.layoutMode?"column":"HORIZONTAL"===e.layoutMode?"row":"unknown"}},16:function(e,t,n){"use strict";n.d(t,"a",function(){return i});const i=e=>"symbol"==typeof e?null:JSON.parse(JSON.stringify(e))},20:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(15),o=function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((i=i.apply(e,t||[])).next())})};function r(e,t,n=null){return o(this,void 0,void 0,function*(){if(e&&(yield t(e,n)),Object(i.b)(e))for(const n of e.children)yield r(n,t,e)})}},24:function(e,t,n){"use strict";n.d(t,"a",function(){return i});const i={ui:{baseHeight:620,baseWidth:323}}}});